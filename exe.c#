using System;
using System.Diagnostics;

class Program
{
    static void Main(string[] args)
    {
        // 設定 Python 的路徑
        string pythonPath = @"D:\miniconda\python.exe"; // 或是你 Python 可執行文件的路徑
        // 設定你的 Python 腳本的路徑
        string scriptPath = @"C:\Users\jacinto_mac\Downloads\mc_hackathon2024\app\chat_room.py";

        // 設定執行 Python 腳本的參數
        ProcessStartInfo start = new ProcessStartInfo();
        start.FileName = pythonPath;
        start.Arguments = $"\"{scriptPath}\"";
        start.UseShellExecute = false;
        start.RedirectStandardOutput = true;
        start.RedirectStandardError = true;
        start.CreateNoWindow = true;  // 選擇是否顯示控制台窗口

        try
        {
            using (Process process = Process.Start(start))
            {
                // 讀取輸出
                using (System.IO.StreamReader reader = process.StandardOutput)
                {
                    string result = reader.ReadToEnd();
                    Console.WriteLine(result);
                }

                // 讀取錯誤信息
                using (System.IO.StreamReader errorReader = process.StandardError)
                {
                    string errors = errorReader.ReadToEnd();
                    if (!string.IsNullOrEmpty(errors))
                    {
                        Console.WriteLine("Errors:");
                        Console.WriteLine(errors);
                    }
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"執行 Python 腳本失敗: {ex.Message}");
        }
    }
}